(()=>{"use strict";var e,t,n,r={819:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.AddCustomHandler=t.customHandlers=t.HTMLBindHandler=void 0;var i=n(665),o=n(593),a=n(495),s=n(476),l=n(601),u=["if","foreach","class","style"],d=function(){function e(e){switch(this.isCustom=null,this.type=e.type,this.element=e.element,this.result=null,this.expression=e.expression,this.attribute=e.attribute,this.type){case"if":case"foreach":this.replaceForMarker(this.type,this.expression)}!this.RequiresAttr(this.type)&&this.element.getAttribute&&this.attribute&&this.element.getAttribute(this.attribute)&&this.element.removeAttribute(this.attribute)}return e.prototype.compute=function(e){if(this.element.isConnected)try{return p[this.type](this,e)}catch(e){var t=this.outerHTML?this.outerHTML:this.element;throw new Error("Couldn't compute HTMLBindHandler\n".concat(t,"\n ").concat(e.message," "))}},e.prototype.RequiresAttr=function(e){return-1===u.indexOf(e)},e.prototype.replaceForMarker=function(e,t){var n=new Comment("".concat(e,":").concat(t," start")),r=new Comment("".concat(e,":").concat(t," end"));this.element.removeAttribute(":".concat(e)),this.outerHTML=this.element.outerHTML,this.element.replaceWith(n),this.element=n,this.element.after(r)},e}();t.HTMLBindHandler=d;var c=i.BindEventValues.reduce((function(e,t){return e[t]=function(e,t){e.type in e.element&&(e.element[e.type]=function(){(0,o.evaluateDOMExpression)(e.expression,t)})},e}),{}),p=r({innerhtml:function(e,t){e.result=(0,o.evaluateDOMExpression)(e.expression,t),e.element.innerHTML=String(e.result)},innertext:function(e,t){e.result=(0,o.evaluateDOMExpression)(e.expression,t),e.element.innerText=String(e.result)},interpolation:function(e,t){e.element.textContent=(0,o.interpolateText)(e.expression,t)},class:function(e,t){var n=e.attribute&&e.attribute.split(l.BindingChar)||[];if(n.length>2){e.result=n[2];var r=String(e.result),i=Boolean((0,o.evaluateDOMExpression)(e.expression,t)),a=e.element.classList;i&&!a.contains(r)?a.add(r):a.contains(r)&&a.remove(r)}else{e.result=(0,o.evaluateDOMExpression)(e.expression,t);var s=String(e.result),u=String(e.previous);u&&s!==u&&e.element.classList.contains(u)&&e.element.classList.remove(u),s&&(e.element.classList.add(s),e.previous=s)}},style:function(e,t){e.result=(0,o.evaluateDOMExpression)(e.expression,t)||{},e.element,Object.keys(e.result).forEach((function(t){e.element.style&&void 0!==e.element.style[t]&&(e.element.style[t]=e.result[t])}))},attr:function(e,n){var r,i=e.element.getAttribute(e.attribute||""),a=(null===(r=e.attribute)||void 0===r?void 0:r.split(l.BindingChar)[1])||"";if(i&&a&&(e.result=(0,o.evaluateDOMExpression)(e.expression,n),e.element.setAttribute(a,String(e.result||""))),e.isCustom)return t.customHandlers[e.isCustom](e,n)},if:s.IfBindHandler,foreach:a.ForEachBindHandler},c);t.customHandlers={},t.AddCustomHandler=function(e,n){if(p[e])throw new Error("Can't add custom bind handler name: \"".concat(e,"\" since it already exists :(\n\n    If you feel like the bind handler doesn't do what you need, feel free to add a pull/feature request at: \n\n    https://github.com/DavidMunozMartinez/bindrjs/issues\n"));t.customHandlers[e]=n}},495:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ForEachBindHandler=void 0;var r=n(593),i=n(601);t.ForEachBindHandler=function(e,t){var n,o,a=!1;if(!e.outerHTML)return a;var s=document.createElement("div"),l=e.expression.split(" in ").map((function(e){return e.trim()})),u=l[0],d=l[1],c=(0,r.evaluateDOMExpression)(d,t)||[];if(e.result&&(c.length,e.result.length),c.length)for(;(null===(n=e.element.nextSibling)||void 0===n?void 0:n.textContent)!=="".concat(e.type,":").concat(e.expression," end");)null===(o=e.element.nextElementSibling)||void 0===o||o.remove();a=[];for(var p=function(t){var n=e.outerHTML||"",o="".concat(d,"[").concat(t,"]");s.innerHTML=n.replace(i.InterpolationRegexp,(function(e,t){return"${".concat((0,r.findAndReplaceVariable)(t,u,o),"}")}));var l=s.children[0];e.element.after(l),(0,r.recurseElementNodes)(l,(function(e){e.nodeType>1||e.getAttributeNames().filter((function(e){return 0===e.indexOf(i.BindingChar)})).forEach((function(t){var n=(0,r.findAndReplaceVariable)(e.getAttribute(t)||"",u,o);e.setAttribute(t,n)}))})),a.push(l)},f=c.length-1;f>-1;f--)p(f);return e.result=c,a}},476:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IfBindHandler=void 0;var r=n(593);t.IfBindHandler=function(e,t){var n,i=!1;if(!e.outerHTML)return i;if(e.result=Boolean((0,r.evaluateDOMExpression)(e.expression,t)),e.result!==e.previous)if(e.result){var o=document.createElement("div");o.innerHTML=e.outerHTML,e.element.after(o.children[0]),i=e.element.nextElementSibling}else"boolean"==typeof e.previous&&(null===(n=e.element.nextSibling)||void 0===n||n.remove());return e.previous=e.result,[i]}},665:function(e,t){var n=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.BindValues=t.BindHTMLValues=t.BindCodeTypeValues=t.BindEventValues=t.BindClipboardEventValues=t.BindDragEventValues=t.BindMouseEventValues=t.BindKeyboardEventValues=t.BindFormEventValues=t.BindWindowEventAttributeValues=void 0,t.BindWindowEventAttributeValues=["onafterprint","onbeforeprint","onbeforeunload","onerror","onhashchange","onload","onmessage","onoffline","ononline","onpagehide","onpageshow","onpopstate","onresize","onstorage","onunload"],t.BindFormEventValues=["onblur","onchange","oncontextmenu","onfocus","oninput","oninvalid","onreset","onsearch","onselect","onsubmit"],t.BindKeyboardEventValues=["onkeydown","onkeypress","onkeyup"],t.BindMouseEventValues=["onclick","ondblclick","onmousedown","onmousemove","onmouseleave","onmouseout","onmouseover","onmouseup","onmousewheel","onwheel"],t.BindDragEventValues=["ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","onscroll"],t.BindClipboardEventValues=["oncopy","oncut","onpaste"],t.BindEventValues=r(r(r(r(r(r([],n(t.BindWindowEventAttributeValues),!1),n(t.BindFormEventValues),!1),n(t.BindKeyboardEventValues),!1),n(t.BindMouseEventValues),!1),n(t.BindDragEventValues),!1),n(t.BindClipboardEventValues),!1),t.BindCodeTypeValues=["if","foreach"],t.BindHTMLValues=["innerhtml","innertext","interpolation","class","attr","style"],t.BindValues=r(r(r([],n(t.BindHTMLValues),!1),n(t.BindCodeTypeValues),!1),n(t.BindEventValues),!1)},449:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(819),i=n(665),o=n(593),a=function(){function e(e){var t=this;this.bind={},this.DataBindHandlers={},this.DOMBindHandlers=[],this.values={},this.proxies={},this.id=e.id,this.bindAs=e.bindAs||null,this.ready=e.ready||Function(),this.templateRendered=e.templateRendered||Function(),this.templateBinded=e.templateBinded||Function();var n,i=document.getElementById(this.id);if(e.template&&(n=this.validateTemplate(e.template)),!i)throw new Error("Could not initialize renderer, container not found");this.container=i,e.customBinds&&e.customBinds.forEach((function(e){(0,r.AddCustomHandler)(e.name,e.compute)})),n?n.then((function(n){t.container.innerHTML=n,t.bind=t.objectProxy(e.bind||{},"this"),t.initTemplate()})):(this.bind=this.objectProxy(e.bind||{},"this"),this.initTemplate())}return e.prototype.objectProxy=function(e,t){var n=this;return this.proxies[t]=new Proxy(e,this.objectProxyHandler(t)),Object.keys(e).forEach((function(r){var i=e[r],o=n.isArray(e)?"[".concat(r,"]"):".".concat(r),a="".concat(t).concat(o);"object"==typeof i&&null!==i?(n.objectProxy(i,a),n.isArray(i)&&(n.values[a]=i)):n.values[a]=i})),this.proxies[t]},e.prototype.isArray=function(e){return"object"==typeof e&&void 0!==e.length},e.prototype.objectProxyHandler=function(e){var t=this;return{get:function(n,r){var i=t.isArray(n)?"[".concat(r,"]"):".".concat(r),o=e+i;return t.proxies[o]||n[r]},set:function(n,r,i){var o=t.isArray(n)?"[".concat(r,"]"):".".concat(r),a=e+o;t.values[a]=i;var s=Boolean(void 0!==n[r]);return n[r]=i,t.update(s?a:e),!0}}},e.prototype.initTemplate=function(){var e=this;this.templateRendered(),this.defineBinds(),setTimeout((function(){e.templateBinded(),e.ready()}))},e.prototype.update=function(e){var t=this;if(this.DataBindHandlers[e]){var n=this.DataBindHandlers[e];if(n.affects){var r=[];n.affects.forEach((function(e){var n=e.compute(t.bind);n&&n.length&&(r=r.concat(n))})),r.forEach((function(e){t.defineBinds(e)})),r.length&&this.cleanHandlers(e)}}},e.prototype.defineBinds=function(e){var t=this,n=Object.keys(this.values).filter((function(e){return"function"!=typeof t.values[e]}));this.DOMBindHandlers=this.getTemplateBinds(e),n.forEach((function(e){var n=t.DataBindHandlers[e]&&t.DataBindHandlers[e].affects||[];t.DOMBindHandlers.forEach((function(r){var i=t.propKeyUsedInExpression(e,r.expression),o=t.isHTMLBindType(r.type)||t.isCodeBindType(r.type);i&&o&&n.push(r)})),t.DataBindHandlers[e]={affects:n}}))},e.prototype.propKeyUsedInExpression=function(e,t){return e.indexOf(t)>-1||t.indexOf(e)>-1},e.prototype.getTemplateBinds=function(e){var t=this;e=e||this.container;var n=[];(0,o.recurseElementNodes)(e,(function(e){switch(e.nodeType){case 1:t.getAttrBindsFromElement(e,(function(e){n.push(e)}));break;case 3:t.getInterpolationBindsFromElement(e,(function(e){n.push(e)}))}}));var r=[];return n.forEach((function(e){var n=e.compute(t.bind);n&&n.length&&(r=r.concat(n))})),r.length&&r.forEach((function(e){return t.defineBinds(e)})),n},e.prototype.getAttrBindsFromElement=function(e,t){return e.getAttributeNames().filter((function(e){return e.indexOf(":")>-1})).map((function(n){var o,a=n.split(":")[1],s=i.BindValues[i.BindValues.indexOf(a)];return s?o=new r.HTMLBindHandler({type:s,element:e,expression:e.getAttribute(n)||"",attribute:n}):(o=new r.HTMLBindHandler({type:"attr",element:e,expression:e.getAttribute(n)||"",attribute:n}),r.customHandlers[a]&&(o.isCustom=a)),t(o),o}))},e.prototype.getInterpolationBindsFromElement=function(e,t){if(e.nodeValue&&e.nodeValue.trim())for(var n=e.nodeValue.matchAll(/\${(.*?)}/gm),i=n.next();!i.done;){var o=new r.HTMLBindHandler({type:"interpolation",element:e,expression:i.value.input||"",attribute:null});i=n.next(),t(o)}},e.prototype.validateTemplate=function(e){return new Promise((function(t,n){e.indexOf(".html")>-1?fetch(e).then((function(e){return e.text()})).then((function(e){t(e)})):t(e)}))},e.prototype.cleanHandlers=function(e){for(var t=this.DataBindHandlers[e],n=t.affects.length-1;n>=0;)t.affects[n].element.isConnected||t.affects.splice(n,1),n--},e.prototype.isMouseEventType=function(e){return JSON.parse(JSON.stringify(i.BindMouseEventValues)).includes(e)},e.prototype.isKeyboardEventType=function(e){return JSON.parse(JSON.stringify(i.BindKeyboardEventValues)).includes(e)},e.prototype.isCodeBindType=function(e){return JSON.parse(JSON.stringify(i.BindCodeTypeValues)).includes(e)},e.prototype.isHTMLBindType=function(e){return JSON.parse(JSON.stringify(i.BindHTMLValues)).includes(e)},e.prototype.CustomHandler=function(e,t){(0,r.AddCustomHandler)(e,t)},e}();t.default=a},601:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BindingChar=t.InterpolationRegexp=void 0,t.InterpolationRegexp=/\${(.*?)}/gm,t.BindingChar=":"},593:function(e,t,n){var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.findAndReplaceVariable=t.interpolateText=t.recurseElementNodes=t.evaluateDOMExpression=void 0;var o=n(601);function a(e,t){var n=-1===e.indexOf("return");return new Function("\n    ".concat(n?"return":""," ").concat(e,";\n    ")).apply(t)}t.evaluateDOMExpression=a,t.recurseElementNodes=function e(t,n,r){var i=t,o=i.childNodes;r||n(i);for(var a=0;a<o.length;a++)e(o[a],n)},t.interpolateText=function(e,t){for(var n=e.matchAll(o.InterpolationRegexp),r=n.next(),i=e;!r.done;){var s=String(a(r.value[1],t));i=i.replace(r.value[0],s),r=n.next()}return i};var s=["-","+","*","/","!"],l=["]","."],u=i([" ","\n","",'"',"'","[","("],r(s),!1),d=i([" ","","[","(",".","]",")"],r(s),!1);t.findAndReplaceVariable=function(e,t,n){var o=new RegExp("\\b".concat(t,"\\b"),"g"),a=i([],r(e.matchAll(o)),!1),s=e,c=[];return a.forEach((function(n){for(var r=n.index||0,i=r+t.length,o=r>=1&&e[r-1]||"",a=e[i]||"",s=-1===l.indexOf(o)&&u.indexOf(o)>-1,p=d.indexOf(a)>-1,f=0,h=0,v=r;v>=0;)'"'===e[v]&&h++,"'"===e[v]&&f++,v--;s&&p&&f%2==0&&h%2==0&&c.unshift(r)})),c.forEach((function(e){s="".concat(s.substring(0,e)).concat(n).concat(s.substring(e+t.length,s.length))})),s}}},i={};function o(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={exports:{}};return r[e].call(n.exports,n,n.exports,o),n.exports}t=o(449),n=o(819),(e=window).Bind=t.default,e.CustomBindHandler=n.AddCustomHandler})();
//# sourceMappingURL=index.js.map